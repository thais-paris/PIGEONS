

<div class="container mt-4 fullheight">
  <h1 class='mb-3'>Pigeons disponibles...</h1>

  <div class="p-3 bg-white rounded mb-3" style="width: 100%; height: 300px;"
    data-controller="mapbox"
    data-mapbox-markers-value="<%= @markers.to_json %>"
    data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

  <% @pigeons.each do |pigeon|  %>

    <% if pigeon.photo.attached? %>
      <% image_string = "url('#{cl_image_path pigeon.photo.key, width: 500, crop: :fill}')" %>
    <% else %>
      <% image_string = "url('#{image_path("pigeon-rect.png")}')" %>
    <% end %>

    <div class="pigeon-item p-3 bg-white rounded mb-3">
      <div class='pigeon-avatar rounded-circle' style='background-image: <%= image_string %>'></div>
      <div class='d-flex align-items-center mb-4'>
        <h4 class='me-2 mb-0'><%= pigeon.name %></h4>
        <h5 class= 'me-2 mb-0 text-secondary'> - <%= pigeon.price_day %> € / message</h5>

      </div>
      <p><strong>Espèce :</strong> <%= pigeon.breed.capitalize %>.</p>
      <p><%= pigeon.description %></p>
      <div class="d-flex justify-content-end">
        <%= link_to "Choisir ce pigeon", new_booking_path(pigeon: pigeon, date: @date, address: @address), class: 'btn btn-warning' %>
      </div>
    </div>


  <% end %>
</div>
